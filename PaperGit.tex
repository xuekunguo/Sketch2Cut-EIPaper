\documentclass[9pt, a4paper]{extarticle}

\usepackage[left=1.91cm,right=1.91cm,top=2.54cm,bottom=2.54cm]{geometry}
\usepackage{mathrsfs}
\usepackage[ruled,lined,linesnumbered]{algorithm2e}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{diagbox}
\usepackage{xspace}
%\usepackage{subfigure}
%\usepackage{soul}
%\usepackage{color}
\usepackage{CJK}
%\usepackage[textwidth=4cm, shadow,
%backgroundcolor=blue!20!white,
%bordercolor=red]{todonotes}
%\usepackage[colorlinks,linkcolor=black,
%anchorcolor=black,citecolor=blue]{hyperref}

\def\RCKNNG{\mbox{RC-$k$NNG}\xspace}
\def\OUR{\mbox{Ours}\xspace}
\def\PRESEG{\mbox{PreSeg}\xspace}

%-------------------------- 自定义命令 --------------------------
\newcommand{\TODO}[1]{\textcolor{red}{#1}}  % 字体显示为红色，表达将要做的（但还未做）的事
\newcommand{\DONE}{\textcolor{red}{\bf DONE}} % 表示已完成
\newcommand{\DONING}{\textcolor{blue}{\bf DONING}} % 表示完成了一部分

\setlength{\parskip}{3ex}   % 行间距
\setlength{\parindent}{0pt}   % 首先缩进

% \renewcommand{\theenumi}{\bf {\arabic{enumi})}}  % enumerate, itemize, description内部的标识

\newcommand{\tinytodo}[2][]
{\todo[caption={#2}, size=\small, #1]{\renewcommand{\baselinestretch}{0.5}\selectfont#2\par}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\begin{CJK*}{GBK}{song}

\title{针对浏览式草图造型的按需部件建议技术}
\author{Xuekun Guo}
\date{2016.04.25}

\maketitle

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section*{摘要}
针对浏览式草图造型的按需部件建议技术

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{引言}
开发易用且功能强大的三维造型技术一直是计算机图形学的重要目标之一。
专业工具，例如，Autodesk Maya\textsuperscript{\textregistered}，具有强大的三维造型功能，但操作复杂，需要漫长的培训学习才能掌握。
那些易用的工具，例如，Spore Creature Creator\textsuperscript{\textregistered}将造型过程简化为拼接预定义好的部件。该方法同时提供了简单的部件变形方法，但总体上看，造型能力有限。
弥合三维造型工具易用与功能强大之间的鸿沟是图形学界最具挑战性的问题之一。

针对该问题，一些研究人员尝试开发基于草图的造型技术~\cite{LaViola2007}。
这是一个极具前景的研究方向，因为大多数人都具备基本的绘画技术，都可以使用该类技术造型~\cite{Igarashi1999SG}。
但问题是大多数用户的绘画技术不太好，所以完全按草图很难恢复出具有丰富几何细节的三维模型。
最近几年，研究人员尝试通过草图从三维模型数据库内搜索模型\cite{EitRicBouHilAle12}，或者通过重新组合现有模型的部件得到新模型\cite{Lee2008SBIM}，实现了新手快速造型高质量模型的功能。
然而，由于这类技术仅仅允许组合预定义部件或对部件做简单的变形，限制了造型结果的多样性。
可见，它们是典型的易使用但表达能力低的技术。

在本章内，我们提出Sketch2Cut技术，一个基于数据驱动的草图式造型技术。该方法表现力极强，而且保持了易用性。
我们的方法不再限定使用预定义的部件组合模型，而是采用实时分割技术，从三维模型数据库内搜索符合造型意图的部件。
我们的技术不需要预分割或者标记数据库内的模型。

使用Sketch2Cut，用户可以简单地使用草图创建模型（如图~\ref{FigHeadPic}）。
我们的系统简单易学易用，它除了要求用户具有类似Teddy系统的草图绘制技术外，不需要其它任何造型知识或技术。
然而，使用我们的系统又可以创建出更加多样的几何细节丰富的模型。

设计我们的系统面临非常大的技术难点。
因为不再有一个预分割（或标记）的模型数据库，我们必须实时地找到并切割下与草图相匹配的部件，这样的搜索空间几乎是无穷的。
为了将搜索空间控制在可求解的范围内，我们设计了一种平衡策略。该策略使得所提示的部件在多样化与可用性间取得平衡。
此外，我们的匹配方法必须足够快，可以实时地建议候选部件。
我们发现如果三维模型的二维投影相似，那该三维模型相似。因此，我们将三维模型间的匹配问题转化为多视角下的二维轮廓匹配问题。

本文贡献有三点：
\begin{itemize}
\item 提出一个探索式草图造型方法。该方法从未预分割的三维模型数据库内，实时提取符合用户意图的个性化部件，造型高质量的模型。
\item 提出一个快速的基于草图的三维模型局部匹配算法。该算法将三维模型局部匹配问题转化为多视角下的二维轮廓局部匹配。
三维模型的二维投影由多个轮廓段（Boundary Contour Section）构成。这些轮廓段组织在一种新的随机混合$k$NN图（randomized compound $k$NN graph，RC-$k$NNG）内。
\item 提出一个新的实时分割算法。该算法基于三维模型的超面片图表示，可以快速地从三维模型上提取与用户草图匹配的三维部件。部件提取采用由粗到细的策略，部件边界逐步优化。
\end{itemize}
%--------------------------
\begin{figure}\centering
\includegraphics[width=\linewidth]{./Mat/Head.pdf}
\caption[造型流程示意图]{给一张概念设计图（a）做为参考，用户使用我们的方法非常容易地创建具有丰富几何细节的模型（j）。系统基于草图生成三维代理模型（b，d，f，h）。
代理模型用于实时地从模型数据库内提取个性化的候选部件。我们的方法创建的模型可以由非典型部件（例如，（c）内头部件与（e）内的台灯部件）
与来自不同类模型的部件（例如，（c）内的狗，（e）内的台灯与（g）内的章鱼）构成。}\label{FigHeadPic}
\end{figure}

本章接下来的内容安排如下：首先，介绍研究背景及相关工作，包括模型分割问题的基础知识，现有模型语义分割方法与基于草图的模型搜索方法；
然后，概述本章方法的流程；接着，介绍快速局部匹配加速结构RC-$k$NNG；然后，介绍候选模型搜索技术；
接着，介绍逐步式部件分割技术；然后，介绍我们技术的应用案例及实验结果；最后，对本章做小结。

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{相关工作}
；

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{方法概述}
%--------------------------
\paragraph{用户交互} 使用我们系统的用户可以先从数据库内选择一个基础模型（某部件或者某模型）。
接着，用户通过草图造型代理模型来表示造型意图。系统实时地从数据库内提取一系列与草图相匹配的候选部件。
与现有工作显著不同的是，我们提示的部件可以是非常规部件，而现有工作仅可提示预分割的部件（如图~\ref{FigScreenShot}）。
%--------------------------
\begin{figure}\centering
\includegraphics[width=\linewidth]{./Mat/ScreenShot.pdf}
\caption[交互界面截图]{交互界面截图。界面内展示了当前模型，用户草图，代理模型，系统建议的非常规部件。}\label{FigScreenShot}
\end{figure}

用户从建议列表内选择满意的部件。该部件自动与当前模型组合到一起。如果没有满意的部件，用户可以改变代理部件重新搜索，得到更多建议部件。该过程不断重复，直至造型出满意的结果。

%--------------------------
\paragraph{系统流程}
%--------------------------
\begin{figure}\centering
\includegraphics[width=\linewidth]{./Mat/Pipeline.pdf}
\caption[系统流程示意图]{系统流程示意图。离线阶段，我们首先为数据库模型（a）提取边界轮廓（b）；然后，建立三维模型超面片图（c）；最后，将所有模型的所有轮廓线组织到RC-$K$NNG内（d）。
在线阶段，用户首先通过草图（红色）创建代理模型（当前模型内浅蓝色部件）表达造型意图（e）。
系统通过模型局部匹配技术实时地提取与草图相匹配的部件（f），并按顺序提示给用户（浅蓝色）。
用户选择满意的部件后，系统将它从三维模型上切割下来（g）并组合至当前模型（h）。}\label{FigPipeline}
\end{figure}

系统流程见图~\ref{FigPipeline}。我们的方法由两个阶段构成：离线阶段与在线阶段。离线阶段，我们建立加速结构。该加速结构用于实时地提取用户所需部件。
在线阶段，设计人员与系统交互创建模型。

%--------------------------
\paragraph{离线阶段}
首先，我们为数据库模型提取不同视角下的边界轮廓~\cite{DeCarlo2003}。接着，在不同尺度下提取边界轮廓描述符。

然后，我们将所有模型的边界轮廓组织到RC-$k$NNG内，用于部件快速搜索（见第~\ref{SecRCKNNG}节）。

最后，我们为数据库模型建立超面片图表示（见第~\ref{SubSecSFG}节）。超面片指模型表面上一组相邻面片。将模型分解成一系列超面片，是为了得到该模型的低复杂度表示方法。
三维模型的超面片表示使得我们可以快速提取与匹配的三维部件。

%--------------------------
\paragraph{在线阶段}
通过比较代理轮廓与模型轮廓，我们将三维局部匹配问题转化为多视角的二维轮廓匹配问题，从而找到候选部件包含的超面片。
用户选择候选部件，我们将该部件从其模型上切割下来并与当前模型组合到一起。
我们使用由粗到细的模型分割策略：先在超面片层次计算粗糙边界，再在面片层次优化该边界。
与其它分割方法\cite{Shamir2008}不同，我们的分割方法将轮廓感知，模型表面凹凸性，模型表面光滑程度考虑进来（见第~\ref{SecPartExtract}节）。

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{快速局部匹配结构}\label{SecRCKNNG}
在运行阶段，用户绘制代理模型轮廓，表达建模意图。
系统快速从数据库内搜索出与代理模型相匹配的部件。
我们的系统可以搜索出模型上任意部件，而不仅仅是预分割出的标准部件。
因此，我们必须实时地处理数据库内每个模型，找到模型轮廓上与代理模型轮廓相匹配的部分。
这要求一个极其快速的局部匹配方法。

如果两个三维模型相似，那么他们从所有角度上看起来相似~\cite{Chen2003CGF}。我们发现该观察结论同样适用于代理模型与模型上的目标部件。
因此，为了找到数据库模型上与代理模型相匹配的部分，我们可以比较代理模型与数据库模型间的二维轮廓。
如果我们使用用户草图与数据库模型轮廓做局部匹配，一些与用户草图相似的部件将会被丢掉。
如果我们直接将代理模型与数据库模型做局部匹配，这非常耗时，无法满足交互需求。
因此，我们将代理模型轮廓与数据库模型在多个视角下的投影轮廓做局部匹配。
在离线阶段，我们求得每一个数据库模型在很多视角下的边界轮廓。
然后，问题转化为将代理模型轮廓与数据库模型轮廓做局部匹配的问题。

实时地将如此多的数据库模型轮廓与代理模型轮廓做局部匹配异常困难。现有的算法，比如，分割树~\cite{Muja2014}、哈希存储~\cite{Andoni2008}、
$K$NN图（$k$-nearest neighbors graph）~\cite{Wang2012}等，都针对全局匹配，而不是我们这里的局部匹配。

为了快速找到数据库模型轮廓线与代理模型轮廓线相匹配的部分，我们提出一种新的数据结构，随机混合$K$NN图（RC-$K$NNG）。
RC-$K$NNG的一个顶点代表数据库模型的一条边界轮廓线。然而，在我们的局部匹配问题中，单个轮廓可能在多个不同的段与查询轮廓相匹配（如图~\ref{FigCtourMatch}）。
为了反映这一点，RC-$k$NNG允许一个顶点与多组$k$个最近顶点相连。与当前顶点相连的每一组顶点都与当前轮廓线上同一段相匹配。
因此，通过与一条轮廓线的局部匹配结果，我们可以快速得到在其它轮廓线上的局部匹配结果。
%--------------------------
\begin{figure}\centering
\includegraphics[width=\linewidth]{./Mat/CtourMatch.pdf}
\caption[模型轮廓与查询轮廓匹配示意图]{查询轮廓与模型轮廓的不同部分相匹配。查询轮廓（a）在四个不同的段上与模型轮廓（b）相匹配（标为红色）。}\label{FigCtourMatch}
\end{figure}

\paragraph{创建RC-$k$NNG} 通过暴力方法计算模型轮廓上所有相似的轮廓段建立RC-$k$NNG过于耗时，不可行。
因此，我们采用双随机策略建立RC-$k$NNG：
\begin{enumerate}
\item 我们首先为每条模型轮廓线在每个尺度下提取$n$（在我们的实验中，$n=6$）段（如图\ref{FigKNN}（a））。
一个尺度由一组在模型轮廓上均匀分布的采样点构成：大尺度的采样间距小，包括更多采样点。
我们采用3个尺度，即每条模型轮廓线上的采样点数分别为$50$，$150$，$250$。

为了得到轮廓线上一段，我们随机选择一个不在其它轮廓段上的采样点。
选择该采样点的概率是$p$（$p \propto c \cdot d$，$c$为该采样点的曲率，$d$为该采样点与最近的在其它轮廓段上的采样点的距离）。
以该采样点为中心，分别向两侧取$10$个采样点，构成轮廓段。

\item 我们采用多重随机分治策略~\cite{Wang2012}为所有的轮廓段建立$K$NN图（如图\ref{FigKNN}（b））。
\end{enumerate}
%--------------------------
\begin{figure}\centering
\includegraphics[width=\linewidth]{./Mat/KNN.pdf}
\caption[随机混合$K$NN图]{随机混合$K$NN图。实线圆表示有效轮廓段，虚线圆表示无效轮廓段。给一条模型轮廓（做为随机混合$K$NN图的一个顶点），我们首先取得若干轮廓段（a）。
然后，为每一条轮廓段找到最近邻居并在各轮廓段所属的轮廓间添加边（b）。最后，找到有效轮廓段并做聚类（c）。}\label{FigKNN}
\end{figure}

我们将所有的有效轮廓段添加到全局有效轮廓段列表内。有效轮廓段指该轮廓段与它最近的$k$个邻居间距（见\ref{SubSecCD}节）低于阈值$\varepsilon = 0.85$。
然后，我们对全局有效轮廓段列表内的轮廓段做聚类，聚类代表是聚类中心轮廓段。这些代表做为种子轮廓用于查询阶段（如图\ref{FigKNN}（c））。
聚类个数为${N \mathord{\left/ {\vphantom {N {80}}} \right. \kern-\nulldelimiterspace} {80}}$（$N$是全局有效轮廓段列表内轮廓段的个数）。

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{候选模型搜索}
本章中，我们介绍RC-$k$NNG如何从未做预分割的模型数据库内快速地精确地搜索出与代理模型相匹配候选部件。

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{代理模型创建}
与~\cite{Funkhouser2004}类似，我们使用三维代理模型从数据库内搜索部件并辅助部件组合。
我们提供三种基本代理模型，从而使用户更容易表达造型意图。
当然，用户输入的草图也可直接用于从数据库内搜索部件。

我们提供的三种基本代理模型是：广义球体，广义柱体，薄板模型（如图\ref{FigProxy}）。
广义球体通过Nealen等人~\cite{AndrewNealen2007}的方法生成。
广义柱体通过两笔生成：在当前模型上画一个圆环表示柱体底座，然后用一条曲线指示中心线。中心线位于用户视线方向与圆球起点定义的空间平面上。
广义柱体的一端可以放缩，得到圆锥或圆台。
要得生成薄板型代理模型，用户需要首先在当前模型上画一条曲线，再绘制出其轮廓。
该轮廓位于用户视线方向与曲线起点定义的空间平面上。
我们的系统允许用户对代理模型施加各种操作，包括放缩，切割，托拽顶点等。
通过如上方法生成的各种代理模型见图\ref{FigProxy}及本文视频。
%--------------------------
\begin{figure}\centering
\includegraphics[width=\linewidth]{./Mat/Proxy.pdf}
\caption[三种基础代理模型]{三种基础代理模型。（a）广义球体。（b）广义柱体。（c）薄板模型。}\label{FigProxy}
\end{figure}

用户创建代理模型过程中，系统记录每次操作的视角及操作前后代理模型的体积变化。
代理模型建成后，我们提取代理模型在体积变化最大的视角下的二维轮廓，用于描述用户的建模意图（期望的部件）。
这里的体积变化指画草图前后代理模型的体积之差。

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{轮廓描述符}\label{SubSecCD}
查询轮廓（代理模型轮廓）整体做为一个轮廓段。模型轮廓在每个尺度下都由若干轮廓段构成（见\ref{SecRCKNNG}节）。
模型轮廓的轮廓段与查询轮廓相匹配，从而得到查询轮廓与模型轮廓的局部匹配。

为了比较两个轮廓段，我们为它们计算轮廓描述符。我们采用Riemenschneider等人~\cite{Riemenschneider2010}提出的角度矩阵做为轮廓描述符。
该描述符描述了轮廓段上采样点间的空间分布。

一个轮廓段内有$m=21$个采样点。给一对采样点$\left(b_i, b_j \right)$，我们计算角度值$\alpha_{ij}$：
\[{\alpha _{ij}} = \left\{ {\begin{array}{*{20}{c}}
{\left\langle {\overline {{b_i}{b_j}} ,\overline {{b_i}{b_{i + \Delta }}} } \right\rangle } & {\text{if~} i < j,}  \\
{\left\langle {\overline {{b_i}{b_j}} ,\overline {{b_i}{b_{i - \Delta }}} } \right\rangle } & {\text{if~} i > j,}  \\
0 & {\text{if~} \left\| {i - j} \right\| \le \Delta }  \\
\end{array}} \right.\]
其中，$\delta=2$是偏移量，$\left\langle l_1, l_2 \right\rangle$代表直线$l_1$与$l_2$间的夹角。轮廓描述符即为该角度值构成的矩阵$A$（$A_{ij}=\alpha_{ij}$）。
两个轮廓段$S$与$T$间的距离是两轮廓段的角度矩阵$A^S$与$A^T$的欧式距离：
\[ D(S, T) = \frac{1}{m^2} \sum_{i = 1}^m \sum_{j = 1}^m \left( A^S_{ij} - A^T_{ij} \right)^2\]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{模型搜索}
我们需要先找到$c=9$个与代理模型匹配上的数据库模型（称为候选模型），然后再从候选模型中提取出候选部件建议给用户。
为此，我们在RC-$k$NNG内找到很多（$21c$）匹配轮廓段，得到对应的匹配模型并为它们计算排序分数。
得分最高的$c$个模型会显示给用户。

为得到这些匹配的轮廓段，我们首先将查询轮廓段与RC-$k$NNG的所有种子轮廓段比较。
比较结果存储至优先队列中，与查询轮廓段间距最小的轮廓段排在队首。
然后，以最好优先方式（Best-first Search）遍历整个RC-$k$NNG。
遍历过程中，首先优先队列队首出队并加入匹配轮廓段集合，该队首的所有邻居与查询轮廓段做匹配并入队。
该过程一直进行，直至匹配轮廓段集合内元素数目为$21c$。

对数据库模型，我们按如下方法计算其做为候选模型的分数：
\[ s = \frac{\alpha }{t}\sum\limits_{i = 1}^t {{D_i}}  + \frac{\beta }{t}, \]
其中，$t$是属于该模型的匹配轮廓段数目，$D_i$是第$i$个匹配轮廓段与查询轮廓段间距，$\alpha = 0.95$，$\beta = 0.05$。

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{逐步式部件提取}\label{SecPartExtract}
用户选择了候选模型，我们必须实时地精确地找到并切割下匹配的候选部件。要实现该目标，我们需要解决如下技术难点：
\begin{itemize}
\item 一个轮廓段可能包括多个语义部件。语义部件指类似头部件，椅子背部件等部件。
\item 轮廓边界可能是非常规则的或并不与语义部件直接相关。因此，这样的部件仅能以用户草图为参考分割。
\item 分割速度要足够快，满足交互需求。
\end{itemize}

前两种情况如图\ref{FigPartseg}所示。
%--------------------------
\begin{figure}\centering
\includegraphics[width=\linewidth]{./Mat/IrreWay.pdf}
\caption[非常规分割的例子]{非常规分割方式示意图。在每个子图内，左侧是数据库模型的分割结果，右下角给出结果模型。}\label{FigPartseg}
\end{figure}

我们通过为数据库模型建立超面片图（Superface Graph，SFG）表示解决如上问题。超面片图是三维模型的离散细粒度表示形式。
图上顶点代表超面片。超面片通过对模型做基于边界特征的过分割得到。
图上边描述超面片间的相邻关系。
边的权重表示相连的超面片组成同一部件的概率（如图\ref{FigSFG}所示）。
%--------------------------
\begin{figure}\centering
\includegraphics[width=\linewidth]{./Mat/SFG.pdf}
\caption[三维模型超面片图建立过程示意图]{三维模型超面片图建立过程。给一个Teddy模型（a），我们将它分割成$50$个超面片（b）。一个超面片是超面片图的一个顶点。相邻超面片由带权重的边连接（c）。}\label{FigSFG}
\end{figure}

超面片图包含了相邻超面片合并为更大超面片的先验概率。我们在离线阶段得到每个数据库模型的超面片图表示。

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{超面片图表示}\label{SubSecSFG}
为了给数据库模型建立超面片图表示，我们将模型表面分割成$50$小块~\cite{Huang2011}。一小块视为一个超面片（对应超面片图内一个顶点）。
每一对相邻超面片通过超面片图上一条边相连。

为了计算边的权重，我们对三维模型做$900$次Randomized Segmentation~\cite{Golovinskiy2008}。分割的目标部件数目由$2$变化到$10$。
给一个分割结果，我们为每一个超面片建立一个直方图，描述该超面片属于各分割部件的概率。
直方图的一个直方条针对一个分割部件，其值是该超面片位于该分割部件内的面积比例（如图\ref{FigConsistency}）。
数学上讲，超面片$s$针对分割部件$g$的直方条$h_s^g$定义如下：
\[ h_s^g = \frac{{\sum\limits_{f ~\in~ Faces(g) \cap Faces(s)} {Area\left( {f} \right)} }}{{\sum\limits_{f ~\in~ Faces(s)} {Area\left( {f} \right)} }}, \]
其中，$Face \left( x \right)$是属于$x$的面片集合，$Aera \left( f \right)$指面片$f$的面积。
%--------------------------
\begin{figure}\centering
\includegraphics[width=\linewidth]{./Mat/Consistency.pdf}
\caption[超面片在分割部件上的分布示意图]{超面片在分割部件上的分布示意图。$s_0$，$s_1$和$s_2$是超面片。$g_0$，$g_1$与$g_2$是在模型上通过Randomized Segmentation得到的分割部件。}\label{FigConsistency}
\end{figure}

这些直方图做为计算超面片位于同一部件内概率的特征向量。
我们定义$P\left(s, s' \right)$为相邻超面片$s$与$s'$位于同一部件上的概率（称为超面片间一致性）。
$P \left(s, s' \right)$为两超面片对应的直方图$H$与$H'$的${\chi ^2}$距离：
\[ {P}\left( {s,s'} \right) = 1 - {\chi ^2}\left( {H,H'} \right) = 1 - \frac{1}{2}\sum\limits_{{g_i} \in G} {\frac{{{{\left( {h_s^{{g_i}} - h_{s'}^{{g_i}}} \right)}^2}}}{{{{\left( {h_s^{{g_i}} + h_{s'}^{{g_i}}} \right)}^2}}}}, \]
其中，$G = \left\{ {{g_i}\left| {1 \le i \le N} \right.} \right\}$是一次Randomized Segmentation得到的部件的集合，$g_i$是第$i$个分割部件，$N$是分割部件个数。

为了得到超面片图上边的权重，我们首先将两超面片在不同Randomized Segmentation结果上的一致性累加，然后通过分割次数归一化。

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{模糊部件识别}
第一步，我们在模型的超面片图上提取一个与轮廓段大致匹配的三维部件。
我们将轮廓段两端点相连得到封闭轮廓段。这形成了用户期望部件的二维投影边界。
然后，我们从与投影区域中间最近的超面片图开始，采用泛洪算法，将所有处于该投影区域内的超面片收集起来。

在这个步骤中，我们必须处理如下问题：（1）轮廓段可能深度不连续，跨越几个不相连的部件（\ref{FigComplexCtour}（a））。
（2）匹配上的轮廓段可能不包围任何部件（图\ref{FigComplexCtour}（b）内蓝色与绿色轮廓段包围的部分）。
（3）查询轮廓可能与同一三维部件在不同视角下的轮廓段匹配上（如图\ref{FigComplexCtour}（c））。
为了解决该问题，我们过滤掉无效部件并去掉重复部件。
%--------------------------
\begin{figure}\centering
\includegraphics[width=\linewidth]{./Mat/ComplexCtour.pdf}
\caption[复杂轮廓及其关系示意图]{复杂轮廓及其关系示意图。（a）示意深度不连续轮廓段。（b）示意空轮廓段。（c）示意匹配至同一三维部件在不同视角下的轮廓段。}\label{FigComplexCtour}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{由粗到细地边界优化}
粗糙部件被识别出来后，我们就把它从模型上分割下来并优化其边界使与代理模型更加匹配。在该过程中，我们考虑如下因素：
\begin{itemize}
\item {\bf 轮廓闭包} 正如前面所指出的，连接轮廓段两端点的直线与轮廓段构成目标三维部件的自然边界。因此，目标三维部件的投影应该与该边界尽量一致。
\item {\bf 超面片同现} 如果两个超面片总是出现在随机分割得到的同一部件上，那么它们倾向于同时属于或同时不属于目标三维部件。这一点是超面片的先验概率。
\item {\bf 凹陷} 模型凹陷信息对于得到高质量的分割结果至关重要，因为凹折痕通常被人类视为自然的分割边界\cite{AU2012TVCG}。
\item {\bf 光滑} 分割部件的边界最好不要是剧烈的锯齿形。
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{粗层次部件提取}
我们将粗层次部件提取问题形式化为二值标记问题，该问题可通过最小化Gibbs能量求解：
\[E_{c} = \sum\limits_{{i} \in V} {{E_{1}}\left( {{l_{i}}} \right)}  + \sum\limits_{\left( {i,j} \right) \in E} {{E_{2}}\left( {{l_{i}},{l_{j}}} \right)} ,\]
其中，$V$与$E$分别代表超面片图$\mathcal{G}$的顶点集合与边集合。$E_1\left( l_i \right)$是将顶点$i$标记为$l_i$时的能量耗费。
$E_2 \left(l_i, \l_j \right)$是当分别将顶点$i$与$j$标记$l_i$与$l_j$时的能量耗费。$E_l$定义如下：
\[{E_1}\left( {{l_i}} \right) = \left\{ {\begin{array}{*{20}{c}}
   { - \ln {\mathcal{P}}\left( i \right),} & {{l_i} = 1,}  \\
   { - \ln \left( {1 - {\mathcal{P}}\left( i \right)} \right),} & {{l_i} = 0,}  \\
\end{array}} \right.\]
其中，$\mathcal{P} \left( i \right)$是将标记$1$置给顶点$i$的概率。根据轮廓闭包约束，$\mathcal{P} \left( i \right)$定义为第$i$个超面片的投影位于该轮廓内的面积百分比：
\[{\mathcal{P}}\left( i \right) = \frac{{Area_{proj}^{in}\left( i \right)}}{{Are{a_{proj}}\left( i \right)}},\]
其中，$Area_{proj}^{in} \left( i \right)$是第$i$个超面片的投影与轮廓线闭包相交部分的面积。$Area_{proj} \left( i \right)$是第$i$个超面片的投影的面积。
$E_2$基于超面片同现约束定义为：
\[{E_2}\left( {{l_i},{l_j}} \right) = \left\{ {\begin{array}{*{20}{c}}
   {0,} & {{l_i} = {l_j},}  \\
   {{e_{ij}},} & {{l_i} \ne {l_j},}  \\
\end{array}} \right.\]
其中，$e_{ij}$是超面片图的边权重。该二值标记问题通过二值图割方法求解\cite{Boykov2004}。

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{细层次部件提取}
在超面片层次上得到目标三维部件（一组相邻的超面片）后，我们将边界超面片投影至原模型上与该超面片中心最近的顶点上。
对于超面片图上的边$e$，令$v_1$与$v_2$分别为$e$相连的两超面片在原模型上对应的投影顶点。
我们沿着直线$v_1 v_2$，将$v_1$传播至$v_2$。

然后，我们通过迭代地最小化如下能量函数实现边界优化：
\[ E_{f}=E_{v}+E_{s}, \]
其中，$E_v$是凹陷能量项，$E_s$是光滑能量项。$E_v$定义为所有边界边的凹陷能量之和\cite{Katz2003}：
\[ E_{v}=\sum_{e\in \partial Q}\eta(1+\cos\alpha_{e})|e|, \]
其中，$e$是候选三维部件$Q$边界上的一条边，$\left| \cdot \right|$表示$e$的长度，$\alpha_{e}$是$e$的二面角。
$e$是凹陷边时，$\eta=0.1$；否则$\eta = 1.0$。$E_s$定义如下：
\[{E_s} = \sum\limits_{v \in \partial Q} {\left| {\sin\left\langle {{e_l},{e_r}} \right\rangle } \right|},\]
其中，$v$是边界$Q$上的顶点。$e_l$是$Q$上指向$v$的一条边，$e_r$是$Q$上起于$v$的一条边。
我们通过在边界顶点上施加snake operations~\cite{Ji2006}最小化能量函数$E_f$。

用户点击鼠标即可执行部件边界优化。该步骤是可选的，它并不会对最终造型结果有太大影响。


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{实验结果}
我们用$C++$语言实现系统原型，并在标准台式机（3.5 GHz Intel Core I7-3770K processor, 8GB memory, and an Nvidia GeForce GTX 660 GPU video card）上做实验。
图\ref{FigHeadPic}给出一个例子的造型流程。给一个概念设计，用户通过草图表达其造型意图。系统基于草图生成三维代理模型并实时地从数据库内提取建议部件。
这些建议部件有非典型部件（（c）内的头部件），由一组常规部件构成的部件（（e）内的台灯部件）及来自不同类模型的部件（例如，（c）内来自狗模型的部件，（g）内来自章鱼模型的部件）。
图\ref{FigCTModsProxy}给出更多的造型结果。可见，用户可以使用我们的技术生成很多极具创意的结果。
%--------------------------
\begin{figure}[bh]\centering
\includegraphics[width=0.91\linewidth]{./Mat/CTModsProxy.pdf}
\caption[系统造型结果的例子]{系统造型结果的例子。在每张子图内，我们给出用户绘制的草图（紫色），生成的代理模型（浅蓝色），对应的数据库模型及提取出的部件（数据库模型上的蓝色部件）。
注意结果模型都是由非常规部件或来自不同类的部件构成。}\label{FigCTModsProxy}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{应用}
我们提出的实时的基于草图的分割方法是一种通用性很强的技术，有很多潜在应用。这里我们给出一些应用的例子。
用我们方法造型出的模型可以制造成艺术品，例如个性化的设计\ref{FigFab}。
%--------------------------
\begin{figure}[h]\centering
\includegraphics[width=\linewidth]{./Mat/Fab.pdf}
\caption[用我们系统设计的模型]{用我们系统设计的模型：半人马怪物玩具（a），三维打印台灯（b），三维打印乌龟怪兽（c）。}\label{FigFab}
\end{figure}

\paragraph{模型变异} 本章提出的方法可用于变异模型，如图\ref{FigSegedAsInput}所示。
给一个分割后的模型，将各部件做为查询模型去数据库内搜索相似部件，从搜索结果中选择一个替换原部件即可得到变异模型。
为了得到查询部件对应的轮廓，我们首先对查询部件做主成分分析，然后，将查询部件沿第三主成分方向投影得到对应轮廓。
%--------------------------
\begin{figure}[t]\centering
\includegraphics[width=\linewidth]{./Mat/ShapeVariation.pdf}
\caption[模型变异的例子]{模型变异的例子。输入一个分割后的模型（左侧），以其部件为输入去数据库内搜索相似部件，得到与输入模型结构类似但外形明显不同的模型。}\label{FigSegedAsInput}
\end{figure}

\paragraph{部件建议} 我们的实时部件提取技术可用于提示可用部件~\cite{Chaudhuri2010,Chaudhuri2011}。
与以前的方法不同，我们不需要预分割的三维模型数据库。给一个查询模型，其轮廓做为我们技术的输入，在数据库模型上得到匹配的部分，然后将数据库模型上与匹配部分互补的部分提示给用户。
提示的部件可以是非常规则部件或来自不同类的部件（如图\ref{FigAppl}）。
%--------------------------
\begin{figure}[t]\centering
\includegraphics[width=0.95\linewidth]{./Mat/Appl.pdf}
\caption[部件建议的例子]{部件建议的例子。输入一个查询模型（绿色），我们的系统给出一系列建议部件（紫色）。组合后的模型在建议部件的下方。}\label{FigAppl}
\end{figure}

\paragraph{多尺度部件建议} 我们的系统可建议不同尺度的部件。这里的``尺度''指所建议部件的大小。给一个按如上方法提示的部件，我们在该部件对应的超面片图上做Normalized Cuts~\cite{Golovinskiy2008}，得到$T_n$个分割片段，每一个分割片段都由一组相邻超面片组成。$T_n$定义如下：
\[{T_n} = \frac{{w(Vol(P_M)-Vol\left( {{p_p})} \right)}}{{Vol\left( {{p_p}} \right)}},\]
其中，$Vol\left( \cdot \right)$是模型的体积，$P_M$是搜索得到的模型，$P_p$是数据库模型上与查询部件相匹配的部件，$w = 2$，$1 \le T_n \le 7$。
我们将分割片段按与匹配部件的距离由近及远排序。用户选择一个尺度$S$，我们将小于等于该尺度的分割片段做为建议部件提示给用户（如图\ref{FigMSPS}）。
%--------------------------
\begin{figure}[t]\centering
\includegraphics[width=0.8\linewidth]{./Mat/MSPS.pdf}
\caption[多尺度部件建议的例子]{多尺度部件建议的例子。初始模型及每个步骤得到的结果模型，做为查询部件，列在左侧。在右侧，我们给出每步查询得到的不同尺度下的建议部件（红色）。
数据库模型上与查询部件相对应的部分标为浅蓝色。其它部件标为浅绿色。}\label{FigMSPS}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{快速的轮廓感知的局部匹配}
我们的数据库内共有$513$个三维模型。这些模型共提取出$10,773$个轮廓。将这些轮廓组织成RC-$k$NNG约用$3.5$小时。
建立一个模型的超面片图表示平均用时$20$秒。基于超面片图表示，可实时提取三维目标部件。粗层次部件提取与细层次部件提取分别平均用时$0.15$与$10.3$毫秒。
基于两个加速结构（RC-$k$NNG与SFG）与由粗到细的部件提取策略，我们的系统可以实时响应用户操作。
用户输入草图后，平均用$0.56$秒（通过GPU与多核加速策略）提示可用部件。

为了评估我们的RC-$k$NNG结构，我们与如下方法做了对比：
\begin{itemize}
\item 通过暴力方法建立的传统$k$NNG（单层）（简称$k$NNG）
\item 通过Wang~\cite{Wang2012}提出的随机近似$k$NNG方法建立的传统$k$NNG（简称Wang's $k$NNG）
\item 通过暴力方法建立的RC-$k$NNG
\item 通过Wang提出的随机近似$k$NNG方法建立的RC-$k$NNG
\end{itemize}
对两个$k$NNG方法（1与2），图的顶点表示一整条模型轮廓线。边及其权重通过轮廓线全局匹配得到。
在与代理轮廓线做局部匹配时，我们必须显示地从模型轮廓上提取轮廓段，这极大地降低了方法1与2的速度。

在我们的实验中，$k=20$，每个模型轮廓线上提取$6$条轮廓段。

四种方法的搜索结果见表\ref{TabRCKNNGComp}。
可以很明显地看出，本文提出的方法效果最好。
我们的方法仅比Wang's $k$NNG多花$2$倍时间用于建立加速结构。但从搜索时间上来看，我们的方法是Wang's $k$NNG的$97$倍。
$k$NNG方法（方法1与2），需要实时做局部匹配，所以要慢得多。
%--------------------------
\begin{table}\centering \renewcommand\arraystretch{1.3}
\caption[四种不同方法的搜索效果对比]{四种不同方法的搜索效果对比。R-time表示搜索时间（以秒为单位）。C-time表示创建对应数据结构所用时间（以小时为单位）。}\label{TabRCKNNGComp}
\begin{tabular}{|c|c|c|c|}
\hline \diagbox{Algorithm}{Performance} & R-time  & C-time  \\
\hline Brute force $k$NNG                     & 4.54  & 51.7    \\
\hline Wang's $k$NNG approximation method     & 5.68  & 1.15   \\
\hline \RCKNNG with the brute force method   & 0.053 & 33.89   \\
\hline \RCKNNG with Wang's method            & 0.058 & 3.52    \\
\hline
\end{tabular}
\end{table}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{对比}
为了定性与定量地评估我们方法的效果，我们对比了如方法：
\begin{itemize}
\item {\bf Ours.} 本文提出的方法
\item {\bf PreSeg.} 基于本文方法实现的基于预分割的模型数据库的方法。该方法实现细节如下：1）每个数据库模型都预分割成常规部件（典型语义部件）。比如，人模型分成4部分：头部分，躯干，胳膊，腿。
    2）为每一个部件提取各视角下的边界轮廓线。3）将所有部件的轮廓线组织在$k$NN图内。图内顶点是部件轮廓。通过部件轮廓全局匹配为顶点建立边。3）在运行阶段，输入三维代理部件，
    系统采用类似Ours的方法通过全局匹配返回一组候选部件。
\end{itemize}

我们邀请4位三维造型艺术家与16位学生参与用户测试。4位艺术家中2位具有6年以上三维造型经验，另外2位有4年经验。所有的参与者位于22到31岁之间。
我们将参与者分成A，B两组。每一组都由2位艺术家与8位学生构成。在每一组内男女人数相同。我们设计了两个开放式造型任务：
\begin{itemize}
\item {\bf 生物造型} 假设你是Valve\textsuperscript{\textregistered}公司的一名三维造型师。项目组计划为电子游戏Dota 2\textsuperscript{\textregistered}加入一个新英雄。
    请使用我们的造型系统设计该角色的原型。
\item {\bf 日常用品造型} 假设你是创意生活公司的一名设计师。要求你为客户设计一个个性化的日常用品（例如，个性化的台灯，创意服饰等）。
请使用我们的系统设计该日常用品的原型。
\end{itemize}

\paragraph{用户测试第一阶段} 第一阶段的目标是验证非典型部件（非常规部件，由一组常规部件构成的部件）对用户造型是否有用。我们让所有的测试者完成两个造型任务。A组用户首先使用Ours系统，然后是PreSeg系统。
B组用户首先使用PreSeg系统，然后是Ours系统。在用户使用系统之前，我们先用20分钟时间向其介绍系统操作方法。之后，用户花30分钟操作系统，包括三维代理部件造型，浏览建议部件与组合部件。
图\ref{FigSelfPhoto}展示了一位测试者正在做用户测试。该阶段的一部分造型结果见图\ref{FigPhaseIDesRes}。我们统计了非典型部件与典型部件在各模型内的比例（表\ref{TabRatio}）。
很明显，Ours系统的造型结果可以由非典型部件构成。然而，PreSeg系统的造型结果仅由典型部件构成。Ours系统提供的非典型部件有利于用户的造型。
%--------------------------
\begin{figure}\centering
\includegraphics[width=0.9\linewidth]{./Mat/SelfPhoto.pdf}
\caption[一位测试者正在操作造型系统]{一位测试者正在操作造型系统完成造型任务。}\label{FigSelfPhoto}
\end{figure}
%--------------------------
\begin{table}\centering \renewcommand\arraystretch{1.3}
\caption[非典型部件与典型部件在模型内所占比例统计结果]{非典型部件与典型部件在模型内所占比例统计结果。``\OUR::Atypical''与``\OUR::Regular''表示Ours系统造型结果内非典型部件与典型部件的比例。
``\PRESEG::Atypical''与``\PRESEG::Regular''分别表示PreSeg系统造型结果内非典型部件与典型部件的比例。}\label{TabRatio}
\begin{tabular}{|c|c|c|c|c|c|}
\hline \diagbox{Type}{STAT.}   & Ave. & SD.  & Max. & Med. & Min. \\
\hline \OUR::Atypical     & 0.26 & 0.24 & 0.67 & 0.25 & 0.0  \\
\hline \OUR::Regular      & 0.74 & 0.24 & 1.0  & 0.75 & 0.33 \\
\hline \PRESEG::Atypical   & 0.0  & 0.0  & 0.0  & 0.0  & 0.0 \\
\hline \PRESEG::Regular    & 1.0  & 0.0  & 1.0  & 1.0  & 1.0 \\
\hline
\end{tabular}
\end{table}
%--------------------------
\begin{figure}[th]\centering
\includegraphics[width=0.9\linewidth]{./Mat/PhaseIDesRes.pdf}
\caption[Ours系统与PreSeg系统造型结果]{Ours系统（a）与PreSeg系统（b）造型结果。每个造型结果，其构成部件在右侧。}\label{FigPhaseIDesRes}
\end{figure}

\paragraph{用户测试第二阶段} 在第二阶段，我们的目标是验证Ours系统建议的部件是否比PreSeg系统建议的更能激发造型灵感。A组测试者先使用PreSeg系统，然后是Ours系统。B组用户相反。
我们要求所有测试者为系统提供的所有建议打分。分数成为5等：5分表示非常具有启发性，1分表示非常平庸。

表\ref{TabSuggGrade}给出了Ours系统与PreSeg系统建议的部件的得分情况。由表我们可以很明显地发现Ours系统建议部件的得分高于PreSeg系统的。在图\ref{FigGradeShape}内，我们给出一组代表性的建议部件及其得分。
%--------------------------
\begin{table}\centering \renewcommand\arraystretch{1.3}
\caption[建议部件得分统计结果]{建议部件得分统计结果。``\OUR::Total''与``\PRESEG::Total''分别表示Ours系统与PreSeg系统建议部件的得分。``\OUR::Atypical''与``\OUR::Regular''分别表示Ours系统建议的非典型部件与典型部件的得分。
``\PRESEG::Atypical''与``\PRESEG::Regular''分别表示PreSeg系统建议的非典型部件与典型部件的得分。}\label{TabSuggGrade}
\begin{tabular}{|c|c|c|c|c|c|}
\hline \diagbox{Type}{STAT.}   & Ave. & SD.  & Max. & Med. & Min.  \\
\hline \OUR::Total             & 3.59 & 1.03 & 5    & 3    & 1 \\
\hline \PRESEG::Total          & 3.06 & 0.74 & 5    & 3    & 1 \\
\hline
\hline \OUR::Atypical          & 4.47 & 0.72 & 5    & 5    & 2 \\
\hline \OUR::Regular           & 3.02 & 0.78 & 5    & 3    & 1 \\
\hline \PRESEG::Atypical       & -    & -    & -    & -    & - \\
\hline \PRESEG::Regular        & 3.06 & 0.74 & 5    & 3    & 1 \\
\hline
\end{tabular}
\end{table}
%--------------------------
\begin{figure}\centering
\includegraphics[width=0.8\linewidth]{./Mat/GradeShape.pdf}
\caption[具有代表性的建议部件及其得分]{具有代表性的建议部件及其得分。（a）图给出Ours系统建议的部件（红色）。（b）图给出PreSeg系统建议的部件（蓝色）。}\label{FigGradeShape}
\end{figure}

为了定量地评估两个系统建议部件的非规则性，我们设计了非规则度量标准。直观地讲，不规则度量描述了当前部件与同一模型上相关典型部件间的差异程度。
给一个部件$p$（$p$来自三维模型$M$），其非规则程度值$IRR \left(p \right)$定义如下：
\[IRR\left( p \right) = \max \left\{ {d\left( {p,{q_i}} \right)\left| {\left\{ {{q_i}} \right\} = r\left( p \right)} \right.} \right\},\]
其中，$r \left(p \right)$是$M$上与$p$相交的典型部件的集合。$d \left( p, q_i \right)$是$p$与$q_i$的Light Field Descriptor~\cite{Chen2003CGF}之差的归一化值。

表\ref{TabIRR}给出了两个造型系统建议部件的非规则度量值。由表可以很明显地看出，Ours系统建议的部件相对PreSeg系统的更加不规则。非典型部件导致了非规则性。
图\ref{FigIRRShape}给出了一组代表性的建议部件及其非规则度量值。
%--------------------------
\begin{table}\centering \renewcommand\arraystretch{1.3}
\caption[非规则度量值统计结果]{非规则度量值统计结果。``\OUR::Total''与``\PRESEG::Total''分别代表Ours系统与PreSeg系统建议部件的非规则度量值。
``\OUR::Atypical''与``\OUR:Regular''分别代表由Ours系统建议的非典型部件与典型部件的非规则度量值。
``\PRESEG::Atypical''与``\PRESEG::Regular''分别代表PreSeg系统建议的非典型部件与典型部件的非规则度量值。}\label{TabIRR}
\begin{tabular}{|c|c|c|c|c|c|}
\hline \diagbox{Type}{STAT.} & Ave.  & SD.   & Max.  & Med. & Min.  \\
\hline \OUR::Total           & 0.024 & 0.033 & 0.098 & 0    & 0 \\
\hline \PRESEG::Total        & 0     & 0    &   0  & 0    &  0 \\
\hline
\hline \OUR::Atypical        & 0.062 & 0.022 & 0.098  & 0.053 & 0.025 \\
\hline \OUR:Regular          & 0    & 0    & 0    & 0    & 0 \\
\hline \PRESEG::Atypical     & -    & -    & -    & -    & -  \\
\hline \PRESEG::Regular      & 0    & 0    & 0    & 0    & 0  \\
\hline
\end{tabular}
\end{table}
%--------------------------
\begin{figure}[h]\centering
\includegraphics[width=0.9\linewidth]{./Mat/IRRShape.pdf}
\caption[具有代表性的建议部件及其非规则度量值]{具有代表性的建议部件及其非规则度量值。（a）图给出Ours系统建议的部件（红色）。（b）图给出PreSeg系统建议的部件（蓝色）。}\label{FigIRRShape}
\end{figure}

我们统计了Ours系统与PreSeg系统提供的非典型部件与典型部件的得分（表\ref{TabSuggGrade}）。可以很明显地发现，非典型部件的平均得分高于典型部件的。
表\ref{TabAPRPGradeRatio}给出了每一个分值内非典型部件与典型部件所占比例。很显然，非典型部件得分高于典型部件。
由此，可以得出结论Ours系统建议的部件相对PreSeg系统的更具启发性；相对典型部件，非典型部件对用户的启发更多。
%--------------------------
\begin{table}\centering \renewcommand\arraystretch{1.3}
\caption[各分值内非典型部件与典型部件所占比例统计结果]{各分值内非典型部件与典型部件所占比例统计结果。``\OUR::Atypical''与``\OUR::Regular''分别表示Ours系统的造型结果内非典型部件与典型部件在各分值内所占比例。
``\PRESEG::Atypical''与``\PRESEG::Regular'' 分别表示PreSeg系统的造型结果内非典型部件与典型部件在各分值内所占比例。}\label{TabAPRPGradeRatio}
\begin{tabular}{|c|c|c|c|c|c|}
\hline \diagbox{Type}{Grade} & 1   & 2   & 3    & 4    & 5  \\
\hline \OUR::Atypical        & 0.0 & 0.08 & 0.03 & 0.6 & 0.91 \\
\hline \OUR::Regular         & 1.0 & 0.92 & 0.97 & 0.4 & 0.09 \\
\hline
\hline \PRESEG::Atypical     & 0.0 & 0.0 & 0.0  & 0.0  & 0.0  \\
\hline \PRESEG::Regular      & 1.0 & 1.0 & 1.0  & 1.0  & 1.0  \\
\hline
\end{tabular}
\end{table}

\paragraph{用户测试第三阶段} 在第三阶段，测试者被要求完成一份调查问卷。该调查问卷包括10个陈述句，测试者需要在标准5分李克特量表上为每个陈述打分。图\ref{FigQST}给出调查问题统计结果。
总体来看，测试者对Ours系统给予较高评价。他们觉得Ours系统建议的部件更具启发性，尤其是那些非典型部件。他们认为我们的系统对造型过程的概念设计阶段具有很大助益。
%--------------------------
\begin{figure}[t]\centering
\includegraphics[width=1.0\linewidth]{./Mat/QST.pdf}
\caption[调查问卷统计结果]{调查问卷统计结果。``1''表示``强烈同意''。``2''表示``同意''。``3''表示``中立''。``4''表示``不同意''。``5''表示``强烈不同意''。}\label{FigQST}
\end{figure}

与现有的要求预分割及标记的部件建议技术~\cite{Xie2013CGF,Fan2013CGF}相对，我们的技术不仅可以提供非典型部件，还能提供来自不同类模型的部件。
如果允许从不同类模型内搜索部件，这类技术也可以提供来自不同类模型的部件。然而，他们仍然不太适合提供非典型部件。

建议由一组预分割部件构成的部件看起来容易，实际非常困难。这本质是个组合搜索问题。该问题的复杂度随预分割部件的增长而急剧增长。
从某种程度上讲，我们的RC-$k$NNG技术就是针对组合搜索问题的。如果现有的部件建议技术~\cite{Chaudhuri2010,Xie2013CGF,Fan2013CGF}采用我们的RC-$k$NNG技术，他们也可以达到类似我们技术的效果。

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{本章小结}
在本章中，我们提出针对浏览式草图造型的按需部件建议技术。
在用户输入草图表示其造型意图后，我们的系统基于草图得到三维代理部件，并以之为查询模型到三维模型数据库内搜索候选部件。
这些候选部件是实时地从数据库模型上匹配并分割下来的。
与以前的方法不同，我们的方法不需要预分割的数据库，而且是实时地提取出与用户草图相匹配的部件，因此极大地扩展了建模空间。
我们的系统为艺术家提供了完成开放式造型任务的新方法。同时，我们的方法也推动了草图式造型技术的发展。 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Reference %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\bibliographystyle{alpha}
\bibliography{Bib}
\end{CJK*}
\end{document} 