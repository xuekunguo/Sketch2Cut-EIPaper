

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{实验结果}
我们用$C++$语言实现系统原型，并在标准台式机（3.5 GHz Intel Core I7-3770K processor, 8GB memory, and an Nvidia GeForce GTX 660 GPU video card）上做实验。
图\ref{FigHeadPic}给出一个例子的造型流程。给一个概念设计，用户通过草图表达其造型意图。系统基于草图生成三维代理模型并实时地从数据库内提取建议部件。
这些建议部件有非典型部件（（c）内的头部件），由一组常规部件构成的部件（（e）内的台灯部件）及来自不同类模型的部件（例如，（c）内来自狗模型的部件，（g）内来自章鱼模型的部件）。
图\ref{FigCTModsProxy}给出更多的造型结果。可见，用户可以使用我们的技术生成很多极具创意的结果。
%--------------------------
\begin{figure}[bh]\centering
\includegraphics[width=0.91\linewidth]{./Mat/CTModsProxy.pdf}
\caption[系统造型结果的例子]{系统造型结果的例子。在每张子图内，我们给出用户绘制的草图（紫色），生成的代理模型（浅蓝色），对应的数据库模型及提取出的部件（数据库模型上的蓝色部件）。
注意结果模型都是由非常规部件或来自不同类的部件构成。}\label{FigCTModsProxy}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{对比}
为了定性与定量地评估我们方法的效果，我们对比了如方法：
\begin{itemize}
\item {\bf Ours.} 本文提出的方法
\item {\bf PreSeg.} 基于本文方法实现的基于预分割的模型数据库的方法。该方法实现细节如下：1）每个数据库模型都预分割成常规部件（典型语义部件）。比如，人模型分成4部分：头部分，躯干，胳膊，腿。
    2）为每一个部件提取各视角下的边界轮廓线。3）将所有部件的轮廓线组织在$k$NN图内。图内顶点是部件轮廓。通过部件轮廓全局匹配为顶点建立边。3）在运行阶段，输入三维代理部件，
    系统采用类似Ours的方法通过全局匹配返回一组候选部件。
\end{itemize}

我们邀请4位三维造型艺术家与16位学生参与用户测试。4位艺术家中2位具有6年以上三维造型经验，另外2位有4年经验。所有的参与者位于22到31岁之间。
我们将参与者分成A，B两组。每一组都由2位艺术家与8位学生构成。在每一组内男女人数相同。我们设计了两个开放式造型任务：
\begin{itemize}
\item {\bf 生物造型} 假设你是Valve\textsuperscript{\textregistered}公司的一名三维造型师。项目组计划为电子游戏Dota 2\textsuperscript{\textregistered}加入一个新英雄。
    请使用我们的造型系统设计该角色的原型。
\item {\bf 日常用品造型} 假设你是创意生活公司的一名设计师。要求你为客户设计一个个性化的日常用品（例如，个性化的台灯，创意服饰等）。
请使用我们的系统设计该日常用品的原型。
\end{itemize}

\paragraph{用户测试第一阶段} 第一阶段的目标是验证非典型部件（非常规部件，由一组常规部件构成的部件）对用户造型是否有用。我们让所有的测试者完成两个造型任务。A组用户首先使用Ours系统，然后是PreSeg系统。
B组用户首先使用PreSeg系统，然后是Ours系统。在用户使用系统之前，我们先用20分钟时间向其介绍系统操作方法。之后，用户花30分钟操作系统，包括三维代理部件造型，浏览建议部件与组合部件。
图\ref{FigSelfPhoto}展示了一位测试者正在做用户测试。该阶段的一部分造型结果见图\ref{FigPhaseIDesRes}。我们统计了非典型部件与典型部件在各模型内的比例（表\ref{TabRatio}）。
很明显，Ours系统的造型结果可以由非典型部件构成。然而，PreSeg系统的造型结果仅由典型部件构成。Ours系统提供的非典型部件有利于用户的造型。
%--------------------------
\begin{figure}\centering
\includegraphics[width=0.9\linewidth]{./Mat/SelfPhoto.pdf}
\caption[一位测试者正在操作造型系统]{一位测试者正在操作造型系统完成造型任务。}\label{FigSelfPhoto}
\end{figure}
%--------------------------
\begin{table}\centering \renewcommand\arraystretch{1.3}
\caption[非典型部件与典型部件在模型内所占比例统计结果]{非典型部件与典型部件在模型内所占比例统计结果。``\OUR::Atypical''与``\OUR::Regular''表示Ours系统造型结果内非典型部件与典型部件的比例。
``\PRESEG::Atypical''与``\PRESEG::Regular''分别表示PreSeg系统造型结果内非典型部件与典型部件的比例。}\label{TabRatio}
\begin{tabular}{|c|c|c|c|c|c|}
\hline \diagbox{Type}{STAT.}   & Ave. & SD.  & Max. & Med. & Min. \\
\hline \OUR::Atypical     & 0.26 & 0.24 & 0.67 & 0.25 & 0.0  \\
\hline \OUR::Regular      & 0.74 & 0.24 & 1.0  & 0.75 & 0.33 \\
\hline \PRESEG::Atypical   & 0.0  & 0.0  & 0.0  & 0.0  & 0.0 \\
\hline \PRESEG::Regular    & 1.0  & 0.0  & 1.0  & 1.0  & 1.0 \\
\hline
\end{tabular}
\end{table}
%--------------------------
\begin{figure}[th]\centering
\includegraphics[width=0.9\linewidth]{./Mat/PhaseIDesRes.pdf}
\caption[Ours系统与PreSeg系统造型结果]{Ours系统（a）与PreSeg系统（b）造型结果。每个造型结果，其构成部件在右侧。}\label{FigPhaseIDesRes}
\end{figure}

\paragraph{用户测试第二阶段} 在第二阶段，我们的目标是验证Ours系统建议的部件是否比PreSeg系统建议的更能激发造型灵感。A组测试者先使用PreSeg系统，然后是Ours系统。B组用户相反。
我们要求所有测试者为系统提供的所有建议打分。分数成为5等：5分表示非常具有启发性，1分表示非常平庸。

表\ref{TabSuggGrade}给出了Ours系统与PreSeg系统建议的部件的得分情况。由表我们可以很明显地发现Ours系统建议部件的得分高于PreSeg系统的。在图\ref{FigGradeShape}内，我们给出一组代表性的建议部件及其得分。
%--------------------------
\begin{table}\centering \renewcommand\arraystretch{1.3}
\caption[建议部件得分统计结果]{建议部件得分统计结果。``\OUR::Total''与``\PRESEG::Total''分别表示Ours系统与PreSeg系统建议部件的得分。``\OUR::Atypical''与``\OUR::Regular''分别表示Ours系统建议的非典型部件与典型部件的得分。
``\PRESEG::Atypical''与``\PRESEG::Regular''分别表示PreSeg系统建议的非典型部件与典型部件的得分。}\label{TabSuggGrade}
\begin{tabular}{|c|c|c|c|c|c|}
\hline \diagbox{Type}{STAT.}   & Ave. & SD.  & Max. & Med. & Min.  \\
\hline \OUR::Total             & 3.59 & 1.03 & 5    & 3    & 1 \\
\hline \PRESEG::Total          & 3.06 & 0.74 & 5    & 3    & 1 \\
\hline
\hline \OUR::Atypical          & 4.47 & 0.72 & 5    & 5    & 2 \\
\hline \OUR::Regular           & 3.02 & 0.78 & 5    & 3    & 1 \\
\hline \PRESEG::Atypical       & -    & -    & -    & -    & - \\
\hline \PRESEG::Regular        & 3.06 & 0.74 & 5    & 3    & 1 \\
\hline
\end{tabular}
\end{table}
%--------------------------
\begin{figure}\centering
\includegraphics[width=0.8\linewidth]{./Mat/GradeShape.pdf}
\caption[具有代表性的建议部件及其得分]{具有代表性的建议部件及其得分。（a）图给出Ours系统建议的部件（红色）。（b）图给出PreSeg系统建议的部件（蓝色）。}\label{FigGradeShape}
\end{figure}

为了定量地评估两个系统建议部件的非规则性，我们设计了非规则度量标准。直观地讲，不规则度量描述了当前部件与同一模型上相关典型部件间的差异程度。
给一个部件$p$（$p$来自三维模型$M$），其非规则程度值$IRR \left(p \right)$定义如下：
\[IRR\left( p \right) = \max \left\{ {d\left( {p,{q_i}} \right)\left| {\left\{ {{q_i}} \right\} = r\left( p \right)} \right.} \right\},\]
其中，$r \left(p \right)$是$M$上与$p$相交的典型部件的集合。$d \left( p, q_i \right)$是$p$与$q_i$的Light Field Descriptor~\cite{Chen2003CGF}之差的归一化值。

表\ref{TabIRR}给出了两个造型系统建议部件的非规则度量值。由表可以很明显地看出，Ours系统建议的部件相对PreSeg系统的更加不规则。非典型部件导致了非规则性。
图\ref{FigIRRShape}给出了一组代表性的建议部件及其非规则度量值。
%--------------------------
\begin{table}\centering \renewcommand\arraystretch{1.3}
\caption[非规则度量值统计结果]{非规则度量值统计结果。``\OUR::Total''与``\PRESEG::Total''分别代表Ours系统与PreSeg系统建议部件的非规则度量值。
``\OUR::Atypical''与``\OUR:Regular''分别代表由Ours系统建议的非典型部件与典型部件的非规则度量值。
``\PRESEG::Atypical''与``\PRESEG::Regular''分别代表PreSeg系统建议的非典型部件与典型部件的非规则度量值。}\label{TabIRR}
\begin{tabular}{|c|c|c|c|c|c|}
\hline \diagbox{Type}{STAT.} & Ave.  & SD.   & Max.  & Med. & Min.  \\
\hline \OUR::Total           & 0.024 & 0.033 & 0.098 & 0    & 0 \\
\hline \PRESEG::Total        & 0     & 0    &   0  & 0    &  0 \\
\hline
\hline \OUR::Atypical        & 0.062 & 0.022 & 0.098  & 0.053 & 0.025 \\
\hline \OUR:Regular          & 0    & 0    & 0    & 0    & 0 \\
\hline \PRESEG::Atypical     & -    & -    & -    & -    & -  \\
\hline \PRESEG::Regular      & 0    & 0    & 0    & 0    & 0  \\
\hline
\end{tabular}
\end{table}
%--------------------------
\begin{figure}[h]\centering
\includegraphics[width=0.9\linewidth]{./Mat/IRRShape.pdf}
\caption[具有代表性的建议部件及其非规则度量值]{具有代表性的建议部件及其非规则度量值。（a）图给出Ours系统建议的部件（红色）。（b）图给出PreSeg系统建议的部件（蓝色）。}\label{FigIRRShape}
\end{figure}

我们统计了Ours系统与PreSeg系统提供的非典型部件与典型部件的得分（表\ref{TabSuggGrade}）。可以很明显地发现，非典型部件的平均得分高于典型部件的。
表\ref{TabAPRPGradeRatio}给出了每一个分值内非典型部件与典型部件所占比例。很显然，非典型部件得分高于典型部件。
由此，可以得出结论Ours系统建议的部件相对PreSeg系统的更具启发性；相对典型部件，非典型部件对用户的启发更多。
%--------------------------
\begin{table}\centering \renewcommand\arraystretch{1.3}
\caption[各分值内非典型部件与典型部件所占比例统计结果]{各分值内非典型部件与典型部件所占比例统计结果。``\OUR::Atypical''与``\OUR::Regular''分别表示Ours系统的造型结果内非典型部件与典型部件在各分值内所占比例。
``\PRESEG::Atypical''与``\PRESEG::Regular'' 分别表示PreSeg系统的造型结果内非典型部件与典型部件在各分值内所占比例。}\label{TabAPRPGradeRatio}
\begin{tabular}{|c|c|c|c|c|c|}
\hline \diagbox{Type}{Grade} & 1   & 2   & 3    & 4    & 5  \\
\hline \OUR::Atypical        & 0.0 & 0.08 & 0.03 & 0.6 & 0.91 \\
\hline \OUR::Regular         & 1.0 & 0.92 & 0.97 & 0.4 & 0.09 \\
\hline
\hline \PRESEG::Atypical     & 0.0 & 0.0 & 0.0  & 0.0  & 0.0  \\
\hline \PRESEG::Regular      & 1.0 & 1.0 & 1.0  & 1.0  & 1.0  \\
\hline
\end{tabular}
\end{table}

\paragraph{用户测试第三阶段} 在第三阶段，测试者被要求完成一份调查问卷。该调查问卷包括10个陈述句，测试者需要在标准5分李克特量表上为每个陈述打分。图\ref{FigQST}给出调查问题统计结果。
总体来看，测试者对Ours系统给予较高评价。他们觉得Ours系统建议的部件更具启发性，尤其是那些非典型部件。他们认为我们的系统对造型过程的概念设计阶段具有很大助益。
%--------------------------
\begin{figure}[t]\centering
\includegraphics[width=1.0\linewidth]{./Mat/QST.pdf}
\caption[调查问卷统计结果]{调查问卷统计结果。``1''表示``强烈同意''。``2''表示``同意''。``3''表示``中立''。``4''表示``不同意''。``5''表示``强烈不同意''。}\label{FigQST}
\end{figure}

与现有的要求预分割及标记的部件建议技术~\cite{Xie2013CGF,Fan2013CGF}相对，我们的技术不仅可以提供非典型部件，还能提供来自不同类模型的部件。
如果允许从不同类模型内搜索部件，这类技术也可以提供来自不同类模型的部件。然而，他们仍然不太适合提供非典型部件。

建议由一组预分割部件构成的部件看起来容易，实际非常困难。这本质是个组合搜索问题。该问题的复杂度随预分割部件的增长而急剧增长。
从某种程度上讲，我们的RC-$k$NNG技术就是针对组合搜索问题的。如果现有的部件建议技术~\cite{Chaudhuri2010,Xie2013CGF,Fan2013CGF}采用我们的RC-$k$NNG技术，他们也可以达到类似我们技术的效果。


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\subsection{应用}
%我们提出的实时的基于草图的分割方法是一种通用性很强的技术，有很多潜在应用。这里我们给出一些应用的例子。
%用我们方法造型出的模型可以制造成艺术品，例如个性化的设计\ref{FigFab}。
%%--------------------------
%\begin{figure}[h]\centering
%\includegraphics[width=\linewidth]{./Mat/Fab.pdf}
%\caption[用我们系统设计的模型]{用我们系统设计的模型：半人马怪物玩具（a），三维打印台灯（b），三维打印乌龟怪兽（c）。}\label{FigFab}
%\end{figure}
%
%\paragraph{模型变异} 本章提出的方法可用于变异模型，如图\ref{FigSegedAsInput}所示。
%给一个分割后的模型，将各部件做为查询模型去数据库内搜索相似部件，从搜索结果中选择一个替换原部件即可得到变异模型。
%为了得到查询部件对应的轮廓，我们首先对查询部件做主成分分析，然后，将查询部件沿第三主成分方向投影得到对应轮廓。
%%--------------------------
%\begin{figure}[t]\centering
%\includegraphics[width=\linewidth]{./Mat/ShapeVariation.pdf}
%\caption[模型变异的例子]{模型变异的例子。输入一个分割后的模型（左侧），以其部件为输入去数据库内搜索相似部件，得到与输入模型结构类似但外形明显不同的模型。}\label{FigSegedAsInput}
%\end{figure}
%
%\paragraph{部件建议} 我们的实时部件提取技术可用于提示可用部件~\cite{Chaudhuri2010,Chaudhuri2011}。
%与以前的方法不同，我们不需要预分割的三维模型数据库。给一个查询模型，其轮廓做为我们技术的输入，在数据库模型上得到匹配的部分，然后将数据库模型上与匹配部分互补的部分提示给用户。
%提示的部件可以是非常规则部件或来自不同类的部件（如图\ref{FigAppl}）。
%%--------------------------
%\begin{figure}[t]\centering
%\includegraphics[width=0.95\linewidth]{./Mat/Appl.pdf}
%\caption[部件建议的例子]{部件建议的例子。输入一个查询模型（绿色），我们的系统给出一系列建议部件（紫色）。组合后的模型在建议部件的下方。}\label{FigAppl}
%\end{figure}
%
%\paragraph{多尺度部件建议} 我们的系统可建议不同尺度的部件。这里的``尺度''指所建议部件的大小。给一个按如上方法提示的部件，我们在该部件对应的超面片图上做Normalized Cuts~\cite{Golovinskiy2008}，得到$T_n$个分割片段，每一个分割片段都由一组相邻超面片组成。$T_n$定义如下：
%\[{T_n} = \frac{{w(Vol(P_M)-Vol\left( {{p_p})} \right)}}{{Vol\left( {{p_p}} \right)}},\]
%其中，$Vol\left( \cdot \right)$是模型的体积，$P_M$是搜索得到的模型，$P_p$是数据库模型上与查询部件相匹配的部件，$w = 2$，$1 \le T_n \le 7$。
%我们将分割片段按与匹配部件的距离由近及远排序。用户选择一个尺度$S$，我们将小于等于该尺度的分割片段做为建议部件提示给用户（如图\ref{FigMSPS}）。
%%--------------------------
%\begin{figure}[t]\centering
%\includegraphics[width=0.8\linewidth]{./Mat/MSPS.pdf}
%\caption[多尺度部件建议的例子]{多尺度部件建议的例子。初始模型及每个步骤得到的结果模型，做为查询部件，列在左侧。在右侧，我们给出每步查询得到的不同尺度下的建议部件（红色）。
%数据库模型上与查询部件相对应的部分标为浅蓝色。其它部件标为浅绿色。}\label{FigMSPS}
%\end{figure}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\subsection{快速的轮廓感知的局部匹配}
%我们的数据库内共有$513$个三维模型。这些模型共提取出$10,773$个轮廓。将这些轮廓组织成RC-$k$NNG约用$3.5$小时。
%建立一个模型的超面片图表示平均用时$20$秒。基于超面片图表示，可实时提取三维目标部件。粗层次部件提取与细层次部件提取分别平均用时$0.15$与$10.3$毫秒。
%基于两个加速结构（RC-$k$NNG与SFG）与由粗到细的部件提取策略，我们的系统可以实时响应用户操作。
%用户输入草图后，平均用$0.56$秒（通过GPU与多核加速策略）提示可用部件。
%
%为了评估我们的RC-$k$NNG结构，我们与如下方法做了对比：
%\begin{itemize}
%\item 通过暴力方法建立的传统$k$NNG（单层）（简称$k$NNG）
%\item 通过Wang~\cite{Wang2012}提出的随机近似$k$NNG方法建立的传统$k$NNG（简称Wang's $k$NNG）
%\item 通过暴力方法建立的RC-$k$NNG
%\item 通过Wang提出的随机近似$k$NNG方法建立的RC-$k$NNG
%\end{itemize}
%对两个$k$NNG方法（1与2），图的顶点表示一整条模型轮廓线。边及其权重通过轮廓线全局匹配得到。
%在与代理轮廓线做局部匹配时，我们必须显示地从模型轮廓上提取轮廓段，这极大地降低了方法1与2的速度。
%
%在我们的实验中，$k=20$，每个模型轮廓线上提取$6$条轮廓段。
%
%四种方法的搜索结果见表\ref{TabRCKNNGComp}。
%可以很明显地看出，本文提出的方法效果最好。
%我们的方法仅比Wang's $k$NNG多花$2$倍时间用于建立加速结构。但从搜索时间上来看，我们的方法是Wang's $k$NNG的$97$倍。
%$k$NNG方法（方法1与2），需要实时做局部匹配，所以要慢得多。
%%--------------------------
%\begin{table}\centering \renewcommand\arraystretch{1.3}
%\caption[四种不同方法的搜索效果对比]{四种不同方法的搜索效果对比。R-time表示搜索时间（以秒为单位）。C-time表示创建对应数据结构所用时间（以小时为单位）。}\label{TabRCKNNGComp}
%\begin{tabular}{|c|c|c|c|}
%\hline \diagbox{Algorithm}{Performance} & R-time  & C-time  \\
%\hline Brute force $k$NNG                     & 4.54  & 51.7    \\
%\hline Wang's $k$NNG approximation method     & 5.68  & 1.15   \\
%\hline \RCKNNG with the brute force method   & 0.053 & 33.89   \\
%\hline \RCKNNG with Wang's method            & 0.058 & 3.52    \\
%\hline
%\end{tabular}
%\end{table}
